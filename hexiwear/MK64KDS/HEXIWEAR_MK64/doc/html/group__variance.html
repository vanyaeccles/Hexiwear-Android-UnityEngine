<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>HEXIWEAR MK64 Firmware Reference Manual: Variance</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="hexiweare_logo_main_black.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">HEXIWEAR MK64 Firmware Reference Manual
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__variance.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Variance<div class="ingroups"><a class="el" href="group__group_stats.html">Statistics Functions</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga393f26c5a3bfa05624fb8d32232a6d96"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__variance.html#ga393f26c5a3bfa05624fb8d32232a6d96">arm_var_f32</a> (float32_t *pSrc, uint32_t blockSize, float32_t *pResult)</td></tr>
<tr class="memdesc:ga393f26c5a3bfa05624fb8d32232a6d96"><td class="mdescLeft">&#160;</td><td class="mdescRight">Variance of the elements of a floating-point vector.  <a href="#ga393f26c5a3bfa05624fb8d32232a6d96">More...</a><br /></td></tr>
<tr class="separator:ga393f26c5a3bfa05624fb8d32232a6d96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga79dce009ed2de28a125aeb3f19631654"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__variance.html#ga79dce009ed2de28a125aeb3f19631654">arm_var_q15</a> (q15_t *pSrc, uint32_t blockSize, q15_t *pResult)</td></tr>
<tr class="memdesc:ga79dce009ed2de28a125aeb3f19631654"><td class="mdescLeft">&#160;</td><td class="mdescRight">Variance of the elements of a Q15 vector.  <a href="#ga79dce009ed2de28a125aeb3f19631654">More...</a><br /></td></tr>
<tr class="separator:ga79dce009ed2de28a125aeb3f19631654"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac02873f1c2cc80adfd799305f0e6465d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__variance.html#gac02873f1c2cc80adfd799305f0e6465d">arm_var_q31</a> (q31_t *pSrc, uint32_t blockSize, q31_t *pResult)</td></tr>
<tr class="memdesc:gac02873f1c2cc80adfd799305f0e6465d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Variance of the elements of a Q31 vector.  <a href="#gac02873f1c2cc80adfd799305f0e6465d">More...</a><br /></td></tr>
<tr class="separator:gac02873f1c2cc80adfd799305f0e6465d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Calculates the variance of the elements in the input vector. The underlying algorithm is used:</p>
<pre>
    Result = (sumOfSquares - sum<sup>2</sup> / blockSize) / (blockSize - 1)</pre><pre>    where, sumOfSquares = pSrc[0] * pSrc[0] + pSrc[1] * pSrc[1] + ... + pSrc[blockSize-1] * pSrc[blockSize-1]</pre><pre>                    sum = pSrc[0] + pSrc[1] + pSrc[2] + ... + pSrc[blockSize-1]
</pre><p>There are separate functions for floating point, Q31, and Q15 data types. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga393f26c5a3bfa05624fb8d32232a6d96"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void arm_var_f32 </td>
          <td>(</td>
          <td class="paramtype">float32_t *&#160;</td>
          <td class="paramname"><em>pSrc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>blockSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float32_t *&#160;</td>
          <td class="paramname"><em>pResult</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Variance of the elements of a floating-point vector. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*pSrc</td><td>points to the input vector </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">blockSize</td><td>length of the input vector </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">*pResult</td><td>variance value returned here </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>none. </dd></dl>
<p>Temporary result storage</p>
<p>Sum of squares</p>
<p>input value</p>
<p>loop counter</p>
<p>Run the below code for Cortex-M4 and Cortex-M3</p>
<p>Temporary variables</p>
<p>First part of the processing with loop unrolling. Compute 4 outputs at a time. a second loop below computes the remaining 1 to 3 samples.</p>
<p>C = (A[0] * A[0] + A[1] * A[1] + ... + A[blockSize-1] * A[blockSize-1])</p>
<p>Compute Sum of squares of the input samples and then store the result in a temporary variable, sum.</p>
<p>Decrement the loop counter</p>
<p>If the blockSize is not a multiple of 4, compute any remaining output samples here. No loop unrolling is used.</p>
<p>C = (A[0] * A[0] + A[1] * A[1] + ... + A[blockSize-1] * A[blockSize-1])</p>
<p>Compute Sum of squares of the input samples and then store the result in a temporary variable, sum.</p>
<p>Decrement the loop counter</p>
<p>Compute Mean of squares of the input samples and then store the result in a temporary variable, meanOfSquares.</p>
<p>Compute mean of all input values</p>
<p>Compute square of mean</p>
<p>Compute variance and then store the result to the destination </p>

<p>Definition at line <a class="el" href="arm__var__f32_8c_source.html#l00080">80</a> of file <a class="el" href="arm__var__f32_8c_source.html">arm_var_f32.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga79dce009ed2de28a125aeb3f19631654"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void arm_var_q15 </td>
          <td>(</td>
          <td class="paramtype">q15_t *&#160;</td>
          <td class="paramname"><em>pSrc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>blockSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">q15_t *&#160;</td>
          <td class="paramname"><em>pResult</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Variance of the elements of a Q15 vector. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*pSrc</td><td>points to the input vector </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">blockSize</td><td>length of the input vector </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">*pResult</td><td>variance value returned here </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>none.</dd></dl>
<p><b>Scaling and Overflow Behavior:</b></p>
<dl class="section user"><dt></dt><dd>The function is implemented using a 64-bit internal accumulator. The input is represented in 1.15 format. Intermediate multiplication yields a 2.30 format, and this result is added without saturation to a 64-bit accumulator in 34.30 format. With 33 guard bits in the accumulator, there is no risk of overflow, and the full precision of the intermediate multiplication is preserved. Finally, the 34.30 result is truncated to 34.15 format by discarding the lower 15 bits, and then saturated to yield a result in 1.15 format. </dd></dl>
<p>Accumulator</p>
<p>square of mean and mean of square</p>
<p>loop counter</p>
<p>Accumulator</p>
<p>Run the below code for Cortex-M4 and Cortex-M3</p>
<p>input value</p>
<p>input value</p>
<p>First part of the processing with loop unrolling. Compute 4 outputs at a time. a second loop below computes the remaining 1 to 3 samples.</p>
<p>C = (A[0] * A[0] + A[1] * A[1] + ... + A[blockSize-1] * A[blockSize-1])</p>
<p>Compute Sum of squares of the input samples and then store the result in a temporary variable, sum.</p>
<p>Decrement the loop counter</p>
<p>If the blockSize is not a multiple of 4, compute any remaining output samples here. No loop unrolling is used.</p>
<p>C = (A[0] * A[0] + A[1] * A[1] + ... + A[blockSize-1] * A[blockSize-1])</p>
<p>Compute Sum of squares of the input samples and then store the result in a temporary variable, sum.</p>
<p>Decrement the loop counter</p>
<p>Compute Mean of squares of the input samples and then store the result in a temporary variable, meanOfSquares.</p>
<p>Compute square of mean</p>
<p>mean of the squares minus the square of the mean. </p>

<p>Definition at line <a class="el" href="arm__var__q15_8c_source.html#l00075">75</a> of file <a class="el" href="arm__var__q15_8c_source.html">arm_var_q15.c</a>.</p>

</div>
</div>
<a class="anchor" id="gac02873f1c2cc80adfd799305f0e6465d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void arm_var_q31 </td>
          <td>(</td>
          <td class="paramtype">q31_t *&#160;</td>
          <td class="paramname"><em>pSrc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>blockSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">q31_t *&#160;</td>
          <td class="paramname"><em>pResult</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Variance of the elements of a Q31 vector. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*pSrc</td><td>points to the input vector </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">blockSize</td><td>length of the input vector </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">*pResult</td><td>variance value returned here </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>none.</dd></dl>
<p><b>Scaling and Overflow Behavior:</b></p>
<dl class="section user"><dt></dt><dd>The function is implemented using an internal 64-bit accumulator. The input is represented in 1.31 format, which is then downshifted by 8 bits which yields 1.23, and intermediate multiplication yields a 2.46 format. The accumulator maintains full precision of the intermediate multiplication results, but provides only a 16 guard bits. There is no saturation on intermediate additions. If the accumulator overflows it wraps around and distorts the result. In order to avoid overflows completely the input signal must be scaled down by log2(blockSize)-8 bits, as a total of blockSize additions are performed internally. After division, internal variables should be Q18.46 Finally, the 18.46 accumulator is right shifted by 15 bits to yield a 1.31 format value. </dd></dl>
<p>Accumulator</p>
<p>square of mean and mean of square</p>
<p>input value</p>
<p>loop counter</p>
<p>Accumulator</p>
<p>Run the below code for Cortex-M4 and Cortex-M3</p>
<p>First part of the processing with loop unrolling. Compute 4 outputs at a time. a second loop below computes the remaining 1 to 3 samples.</p>
<p>C = (A[0] * A[0] + A[1] * A[1] + ... + A[blockSize-1] * A[blockSize-1])</p>
<p>Compute Sum of squares of the input samples and then store the result in a temporary variable, sum.</p>
<p>Decrement the loop counter</p>
<p>If the blockSize is not a multiple of 4, compute any remaining output samples here. No loop unrolling is used.</p>
<p>C = (A[0] * A[0] + A[1] * A[1] + ... + A[blockSize-1] * A[blockSize-1])</p>
<p>Compute Sum of squares of the input samples and then store the result in a temporary variable, sum.</p>
<p>Decrement the loop counter</p>
<p>Compute Mean of squares of the input samples and then store the result in a temporary variable, meanOfSquares.</p>
<p>Compute square of mean</p>
<p>Compute standard deviation and then store the result to the destination </p>

<p>Definition at line <a class="el" href="arm__var__q31_8c_source.html#l00078">78</a> of file <a class="el" href="arm__var__q31_8c_source.html">arm_var_q31.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
